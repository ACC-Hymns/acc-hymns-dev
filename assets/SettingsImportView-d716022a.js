import{d as T,b as V,G as H,a2 as U,r as E,N as L,h as c,i as e,I as N,U as R,m as h,F as g,p as k,j as r,q as v,w as d,a3 as b,s as i,k as x,a4 as I,R as f,y as A,z as F,B as j,C as q,a5 as D,E as z}from"./index-f810ad57.js";import{_ as G}from"./chevron-back-outline-3b18af6c.js";import{_ as M}from"./home-outline-fa9c027b.js";import{_ as O}from"./settings-5944a888.js";import{T as _}from"./index-5f79b7d1.js";import{u as P}from"./navigator-3043a0c2.js";import{u as J}from"./preferences-250abe2c.js";const K="/acchymns-dev/assets/enter-outline.svg",C="/acchymns-dev/assets/alert-circle-outline.svg",Q="/acchymns-dev/assets/close.svg",s=u=>(A("data-v-2ebe20d3"),u=u(),F(),u),W={class:"menu"},X={class:"title"},Y=s(()=>e("h1",{class:"title--center"},"Import Hymnals",-1)),Z={class:"main-content"},ee={class:"input-option reference-option"},te=["disabled"],se=s(()=>e("img",{class:"ionicon enter-button-icon",src:K},null,-1)),oe=[se],ne={key:0},ae={key:1,class:"warning-label-container"},ie=s(()=>e("img",{class:"ionicon warning-icon",src:C},null,-1)),le=s(()=>e("h5",{class:"warning-label"},"The hymnals below require an internet connection",-1)),ce=[ie,le],re=["onClick"],_e=s(()=>e("img",{class:"ionicon ionicon-custom booktext--right add-button-icon",src:D},null,-1)),de=[_e],ue={key:2},me={key:3,class:"warning-label-container"},pe=s(()=>e("img",{class:"ionicon warning-icon",src:C},null,-1)),he=s(()=>e("h5",{class:"warning-label"},"The hymnals below require an internet connection",-1)),ve=[pe,he],fe={style:{"padding-bottom":"200px"}},ge=["onClick"],we=s(()=>e("img",{class:"ionicon ionicon-custom add-button-icon",src:Q},null,-1)),ye=[we],ke={class:"nav"},be=s(()=>e("img",{class:"ionicon nav__icon",src:M},null,-1)),xe=s(()=>e("span",{class:"nav__text"},"Home",-1)),Ie=s(()=>e("img",{class:"ionicon nav__icon",src:j},null,-1)),Ce=s(()=>e("span",{class:"nav__text"},"Search",-1)),Se=s(()=>e("img",{class:"ionicon nav__icon",src:q},null,-1)),$e=s(()=>e("span",{class:"nav__text"},"Bookmarks",-1)),Be=s(()=>e("img",{class:"ionicon nav__icon--active",src:O},null,-1)),Te=s(()=>e("span",{class:"nav__text"},"Settings",-1)),Ve=T({__name:"SettingsImportView",setup(u){P();const a=J("externalBooks",[]);let w=V("import_books_tooltip_complete",!1);const m=H(()=>Object.values(U).filter(o=>!a.value.includes(o))),p=E("");async function y(o,n=!0){let t=null;try{const l=new AbortController,B=setTimeout(()=>l.abort(),2e3);t=await fetch(o+"/summary.json",{method:"HEAD",signal:l.signal}),clearTimeout(B)}catch(l){if(l.name=="TypeError")return await _.show({text:"Failed to load hymnal!"}),!1;if(l.name!="AbortError")throw l}return t==null||!t.ok||t.status!=200?(await _.show({text:"Failed to load hymnal!"}),!1):a.value.includes(o)?(await _.show({text:"Hymnal already imported!"}),!1):(a.value.push(o),n&&await _.show({text:"Successfully imported hymnal!"}),!0)}async function S(o){if(o in b){const n=b[o];a.value.includes(n)?await _.show({text:`Hymnal (${o}) already imported!`}):await y(n,!1)&&await _.show({text:`Successfully imported hymnal (${o})!`})}else await _.show({text:`Unknown hymnal reference (${o})!`})}L(()=>{w.value||(w.value=!0)});function $(o){a.value=a.value.filter(n=>n!=o)}return(o,n)=>(i(),c(g,null,[e("div",W,[e("div",X,[e("img",{onClick:n[0]||(n[0]=t=>o.$router.back()),class:"ionicon title--left",src:G}),Y])]),e("div",Z,[e("div",ee,[N(e("input",{"onUpdate:modelValue":n[1]||(n[1]=t=>p.value=t),type:"text",class:"search-bar",placeholder:"Reference"},null,512),[[R,p.value,void 0,{trim:!0}]]),e("a",{disabled:p.value.length===0,onClick:n[2]||(n[2]=t=>S(p.value)),class:"reference-button"},oe,8,te)]),m.value.length!=0?(i(),c("h2",ne,"Available Hymnals")):h("",!0),m.value.length!=0?(i(),c("div",ae,ce)):h("",!0),e("div",null,[(i(!0),c(g,null,k(m.value,t=>(i(),x(I,{key:t,src:t,"with-link":!1},{default:d(()=>[e("button",{onClick:l=>y(t)},de,8,re)]),_:2},1032,["src"]))),128))]),r(a).length!=0?(i(),c("h2",ue,"Imported Hymnals")):h("",!0),r(a).length!=0&&m.value.length==0?(i(),c("div",me,ve)):h("",!0),e("div",fe,[(i(!0),c(g,null,k(r(a),t=>(i(),x(I,{id:"import-book",key:t,src:t,"with-link":!1},{default:d(()=>[e("button",{onClick:l=>$(t)},ye,8,ge)]),_:2},1032,["src"]))),128))])]),e("nav",ke,[v(r(f),{to:"/",class:"nav__link"},{default:d(()=>[be,xe]),_:1}),v(r(f),{to:"/search",class:"nav__link"},{default:d(()=>[Ie,Ce]),_:1}),v(r(f),{to:"/bookmarks",class:"nav__link"},{default:d(()=>[Se,$e]),_:1}),v(r(f),{to:"/settings",class:"nav__link nav__link--active"},{default:d(()=>[Be,Te]),_:1})])],64))}});const Fe=z(Ve,[["__scopeId","data-v-2ebe20d3"]]);export{Fe as default};
