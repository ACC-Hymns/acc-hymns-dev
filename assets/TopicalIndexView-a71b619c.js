import{_ as I}from"./chevron-back-outline-3b18af6c.js";import{_ as z}from"./wifi_off-0a29b492.js";import{d as L,u as N,r as n,H as K,o as H,c as q,g as J,e as Q,I as U,i as W,n as X,j as Y,f as Z,a as ee,k as u,l as s,m as l,t as p,F as b,s as T,v as te,x as i,A,p as B,w as P,z as F,R as D,_ as se,B as le,C as ae,D as oe,E as ne,G as ie}from"./index-a8a0d829.js";const re={class:"menu"},ce={class:"title"},ue={class:"title--center"},_e=["src"],de={key:0,class:"fallback-container"},ve={key:1,class:"main-content"},pe={key:0},ge=["onClick"],me={class:"song-title"},fe={class:"song__title"},he={class:"booktext--right"},be={class:"song__number"},ke={key:1,class:"song-list"},ye={class:"song__title"},xe={class:"booktext--right"},we={class:"song__number"},$e=L({__name:"TopicalIndexView",props:{book:{}},setup(E){const g=E,V=N(),O=n(!1);let k=n(""),y=n("#FFFFFF"),x=n("#000000"),_=n({}),C=n(""),d=null,m=null;const G=K(()=>v.value?w.value:C.value in _.value?_.value[C.value]:[]);H((c,a)=>{le(a.fullPath),c.fullPath.includes("/display")||(ae(a.fullPath),oe(a.fullPath))}),q(async()=>{m=await J(),d=await Q(g.book),k.value=m[g.book].name.short,y.value=m[g.book].primaryColor,x.value=m[g.book].secondaryColor;const c=await U(m[g.book].name.short);if(c==null||d==null){O.value=!0;return}for(let[t,e]of Object.entries(c)){_.value[t]=[];for(let o of e)_.value[t].push({number:o,title:d[o].title,notes:d[o].notes});_.value[t].sort((o,j)=>o.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"").localeCompare(j.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"")))}$.value=Object.keys(_.value);for(const t of Object.keys(d)){let e=d[t];w.value.push({title:(e==null?void 0:e.title)??"",number:t,notes:e==null?void 0:e.notes,first_line:e==null?void 0:e.first_line})}w.value.sort((t,e)=>t.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"").localeCompare(e.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,""))),v.value?(f.value="Alphabetical Index",h.value="/acchymns-dev/assets/list-bulleted.svg"):(f.value="Topical Index",h.value="/acchymns-dev/assets/text.svg");let a=W(S.fullPath);a!=null&&a.forEach(t=>{r.value.push($.value[t])}),await X(),Y(S.fullPath)});let v=Z("isAlphabetical",!1);const w=n([]);let f=n("Topical Index"),h=n("/acchymns-dev/assets/text.svg");function M(){v.value=!v.value,v.value?(f.value="Alphabetical Index",h.value="/acchymns-dev/assets/list-bulleted.svg"):(f.value="Topical Index",h.value="/acchymns-dev/assets/text.svg"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},10)}let $=n([]),r=n([]);const S=ee();function R(c){r.value.includes(c)?r.value.splice(r.value.indexOf(c),1):r.value.push(c);let a=[];r.value.forEach(t=>{var e=$.value.indexOf(t);a.push(e)}),ne(S.fullPath,a)}return(c,a)=>(i(),u(b,null,[s("div",re,[s("div",ce,[s("img",{onClick:a[0]||(a[0]=t=>l(V).back()),class:"ionicon title--left",src:I}),s("h1",ue,p(l(f)),1),s("img",{onClick:a[1]||(a[1]=t=>M()),class:"ionicon title--right",src:l(h)},null,8,_e)])]),O.value?(i(),u("div",de,a[2]||(a[2]=[s("img",{class:"wifi-fallback",src:z},null,-1)]))):(i(),u("div",ve,[l(v)?(i(),u("div",ke,[(i(!0),u(b,null,T(G.value,t=>(i(),B(l(D),{key:t.title+t.number,to:`/display/${l(k)}/${t.number}`,class:"song",style:F(`background: linear-gradient(135deg, ${l(y)}, ${l(x)})`)},{default:P(()=>[s("div",null,[s("div",ye,p(t.title),1)]),s("div",xe,[s("div",we,"#"+p(t.number),1)])]),_:2},1032,["to","style"]))),128))])):(i(),u("div",pe,[(i(!0),u(b,null,T(l(_),(t,e)=>(i(),u("div",{key:e,class:"song-group-container",ref_for:!0,ref:"song_group_elements"},[s("div",{class:"song-group-title-container",onClick:o=>R(e.toString())},[s("div",me,p(e),1),s("img",{class:A(["ionicon nav__icon dropdown-icon",{"dropdown-icon-active":l(r).includes(e.toString())}]),src:I},null,2)],8,ge),s("div",{class:A(["wrapper",{"wrapper-active":l(r).includes(e.toString())}])},[s("div",{class:A(["song-button-container",{"song-button-container-active":l(r).includes(e.toString())}])},[(i(!0),u(b,null,T(l(_)[e],o=>(i(),B(l(D),{key:o.title+o.number,to:`/display/${l(k)}/${o.number}`,class:"song topic-song",style:F(`background: linear-gradient(135deg, ${l(y)}, ${l(x)})`)},{default:P(()=>[s("div",null,[s("div",fe,p(o.title),1)]),s("div",he,[s("div",be,"#"+p(o.number),1)])]),_:2},1032,["to","style"]))),128))],2)],2)]))),128))]))])),te(se,{current_page:"home"})],64))}});const Oe=ie($e,[["__scopeId","data-v-2e3442d2"]]);export{Oe as default};
