import{d as A,r as o,c as G,a7 as K,$ as T,k as n,m as l,l as a,t as r,q as S,z as m,F as I,s as R,x as c,A as U,G as F,H as q,L as H}from"./index-6b6baf72.js";import{v as P,r as $,g as j}from"./broadcast-947fc747.js";const J=v=>(F("data-v-ebafd16a"),v=v(),q(),v),Q={class:"info-seperator"},W={key:0,class:"song-info"},X={class:"bottom-text"},Y={class:"digital-clock"},Z={key:1,class:"song-info"},ee={class:"song-number"},te={key:0,class:"verses-label"},se={key:1,class:"digital-clock"},oe={key:2,class:"clock"},le=J(()=>a("div",{class:"dot"},null,-1)),ae=A({__name:"BroadcastView",setup(v){let h=o(!1),y=o(""),i=o(""),d=o(""),b=o(""),f=o(""),g=o(!1),_=o(!1),k=o(""),p=o(""),D=o([]);function O(){const e=new Date,t=e.getHours(),s=e.getMinutes(),u=e.getSeconds();return{hours:t,minutes:s,seconds:u}}function B(){let e=O(),t=e.hours*30+e.minutes*(360/720),s=e.minutes*6+e.seconds*(360/3600),u=e.seconds*6;N.value="rotate("+t+"deg)",w.value="rotate("+s+"deg)",M.value="rotate("+u+"deg)"}function E(){let e=O(),t=e.hours,s=e.minutes,u=t>=12?"PM":"AM";return t=t%12,t=t||12,t+":"+(s<10?"0"+s:s)+" "+u}let x;function L(e){var t=35;if(e>=t)return"8em"}async function C(){let e=(await j(x,y.value)).Item;if(_.value=e.BOOK_ID.S=="BIBLE",_.value)k.value=e.SONG_NUMBER.S,p.value=e.BOOK_COLOR.S;else{if(i.value=e.SONG_NUMBER.S,g.value=!1,e.VERSES.NS[0]==-1)d.value="";else if(e.VERSES.NS[0]==-2)d.value="All Verses";else{e.VERSES.NS.sort((s,u)=>s-u),D.value=e.VERSES.NS,d.value=e.VERSES.NS.join(", "),g.value=!0;let t=z.value;t&&(t.style.fontSize=L(d.value.length)||"10em")}b.value=e.BOOK_COLOR.S,f.value=e.BOOK_ID.S}i.value.length>0||_.value?document.body.style.backgroundColor="white":document.body.style.backgroundColor=e.BG_COLOR.S}let V="";const z=o();G(async()=>{V=document.body.style.backgroundColor,document.body.style.backgroundColor="white",document.body.style.transition="background-color 1s",B(),setInterval(B,100),setInterval(C,2e3);let e=await K.get({key:"broadcasting_auth_token"}),t=await P(e.value||"");if(h.value=t.status==200,y.value=t.data.church_id,console.log("Authorized: "+h.value),!h.value){f.value="Unauthorized";return}x=$(),C()}),T(()=>{document.body.style.backgroundColor=V});let N=o(""),w=o(""),M=o("");return(e,t)=>(c(),n("div",Q,[l(_)?(c(),n("div",W,[a("h2",{ref:"top_text_element",class:"top-text"},r(l(k)),513),a("h2",X,r(l(p)),1),a("h2",Y,r(E()),1)])):(c(),n("div",Z,[a("h1",ee,r(l(i)),1),l(g)?(c(),n("h3",te,"Verses:")):S("",!0),a("h2",{class:"verses",ref_key:"verses_text",ref:z},r(l(d)),513),a("h2",{class:"book-name",style:m({color:l(b)})},r(l(f)),5),l(i).length>0?(c(),n("h2",se,r(E()),1)):S("",!0)])),l(i).length==0&&!l(_)?(c(),n("div",oe,[le,a("div",null,[a("div",{class:"hour-hand",style:m({transform:l(N)})},null,4),a("div",{class:"minute-hand",style:m({transform:l(w)})},null,4)]),a("div",null,[(c(),n(I,null,R(12,s=>a("span",{class:U("h"+s)},r(s),3)),64))]),(c(),n(I,null,R(61,s=>a("div",{class:"diallines",key:s,style:m({transform:"rotate("+6*(s-2)+"deg)"})},null,4)),64))])):S("",!0)]))}});const ue=H(ae,[["__scopeId","data-v-ebafd16a"]]);export{ue as default};
