import{d as G,u as K,r as a,C as q,o as H,g as J,b as P,D as Q,c as U,e as i,f as t,t as r,h as s,q as $,k as L,F as x,l as F,m as C,w as p,n as l,E as W,G as X,i as M,R as m,s as Y,v as Z,x as ee,y as te,z as se,A as oe,B as le}from"./index-8f9819e1.js";import{_ as ae}from"./chevron-back-outline-3b18af6c.js";import{_ as ie}from"./wifi_off-0a29b492.js";const c=h=>(Y("data-v-4fee3431"),h=h(),Z(),h),ne={class:"menu"},ce={class:"title"},_e={class:"title--center"},re=["src"],ue={key:0,class:"fallback-container"},de=c(()=>t("img",{class:"wifi-fallback",src:ie},null,-1)),ve=[de],pe={key:1,class:"main-content"},me={key:0},he={class:"topic-title"},ke={class:"song__title"},fe={class:"booktext--right"},be={class:"song__number"},ge={class:"topic-list"},ye=["onClick"],xe={class:"topic-title"},we={key:1},Te={class:"song__title"},$e={class:"booktext--right"},Ce={class:"song__number"},Ie={class:"nav"},Se=c(()=>t("img",{class:"ionicon nav__icon--active",src:ee},null,-1)),Ae=c(()=>t("span",{class:"nav__text"},"Home",-1)),Be=c(()=>t("img",{class:"ionicon nav__icon",src:te},null,-1)),Fe=c(()=>t("span",{class:"nav__text"},"Search",-1)),De=c(()=>t("img",{class:"ionicon nav__icon",src:se},null,-1)),Oe=c(()=>t("span",{class:"nav__text"},"Bookmarks",-1)),Ve=c(()=>t("img",{class:"ionicon nav__icon",src:oe},null,-1)),Le=c(()=>t("span",{class:"nav__text"},"Settings",-1)),Me=G({__name:"TopicalIndexView",props:{book:{}},setup(h){const k=h,E=K(),_=a(!0),D=a(!1),N=a(null);let I=a(""),f=a("#FFFFFF"),S=a("#000000"),u=a({}),d=a(""),v=null,b=null;const O=q(()=>g.value?B.value:d.value in u.value?u.value[d.value]:[]);H(async()=>{b=await J(),v=await P(k.book),I.value=b[k.book].name.short,f.value=b[k.book].primaryColor,S.value=b[k.book].secondaryColor;const y=await Q(b[k.book].name.short);if(y==null||v==null){D.value=!0;return}for(let[o,e]of Object.entries(y)){u.value[o]=[];for(let n of e)u.value[o].push({number:n,title:v[n].title,notes:v[n].notes});u.value[o].sort((n,V)=>n.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"").localeCompare(V.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"")))}for(const o of Object.keys(v)){let e=v[o];B.value.push({title:(e==null?void 0:e.title)??"",number:o,notes:e==null?void 0:e.notes,firstLine:e==null?void 0:e.firstLine})}B.value.sort((o,e)=>o.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"").localeCompare(e.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,""))),w.value="Topical Index",T.value="../assets/text.svg"});function R(y){_.value?(_.value=!1,d.value=y,setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},10)):A()}function A(){_.value=!0,d.value="",setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},10)}function j(){_.value?E.back():A()}let g=U("isAlphabetical",!1);const B=a([]);let w=a("Topical Index"),T=a("../assets/text.svg");function z(){g.value=!g.value,g.value?(w.value="Alphabetical Index",T.value="../assets/list-bulleted.svg"):(w.value="Topical Index",T.value="../assets/text.svg"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},10)}return(y,o)=>(l(),i(x,null,[t("div",ne,[t("div",ce,[t("img",{onClick:o[0]||(o[0]=e=>j()),class:"ionicon title--left",src:ae}),t("h1",_e,r(s(w)),1),t("img",{onClick:o[1]||(o[1]=e=>z()),class:"ionicon title--right",src:s(T)},null,8,re)])]),D.value?(l(),i("div",ue,ve)):(l(),i("div",pe,[s(g)?(l(),i("div",we,[(l(!0),i(x,null,F(O.value,e=>(l(),M(s(m),{key:e.title+e.number,to:`/display/${s(I)}/${e.number}`,class:"song topic-song",style:$(`background: linear-gradient(135deg, ${s(f)}, ${s(S)})`)},{default:p(()=>[t("div",null,[t("div",Te,r(e.title),1)]),t("div",$e,[t("div",Ce,"#"+r(e.number),1)])]),_:2},1032,["to","style"]))),128))])):(l(),i("div",me,[t("div",{ref_key:"scroll_topic_list",ref:N},[_.value?L("",!0):(l(),i("div",{key:s(d),class:"topic",style:$({background:s(f)}),onClick:A},[t("h3",he,r(s(d)),1)],4))],512),(l(!0),i(x,null,F(O.value,e=>W((l(),M(s(m),{key:e.title+e.number,to:`/display/${s(I)}/${e.number}`,class:"song topic-song",style:$(`background: linear-gradient(135deg, ${s(f)}, ${s(S)})`)},{default:p(()=>[t("div",null,[t("div",ke,r(e.title),1)]),t("div",fe,[t("div",be,"#"+r(e.number),1)])]),_:2},1032,["to","style"])),[[X,!_.value]])),128)),t("div",ge,[(l(!0),i(x,null,F(s(u),(e,n)=>(l(),i(x,{key:n},[_.value?(l(),i("div",{key:0,class:"topic expanded-topic",style:$({background:s(f)}),onClick:V=>R(n)},[t("h3",xe,r(n),1)],12,ye)):L("",!0)],64))),128))])]))])),t("nav",Ie,[C(s(m),{to:"/",class:"nav__link nav__link--active"},{default:p(()=>[Se,Ae]),_:1}),C(s(m),{to:"/search",class:"nav__link"},{default:p(()=>[Be,Fe]),_:1}),C(s(m),{to:"/bookmarks",class:"nav__link"},{default:p(()=>[De,Oe]),_:1}),C(s(m),{to:"/settings",class:"nav__link"},{default:p(()=>[Ve,Le]),_:1})])],64))}});const je=le(Me,[["__scopeId","data-v-4fee3431"]]);export{je as default};
