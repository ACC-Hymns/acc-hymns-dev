import{d as V,a as H,C as E,$ as L,r as R,K as U,e as r,f as t,h as c,E as A,Q as F,k as h,F as g,l as k,m as v,w as d,a0 as b,n as i,i as x,a1 as C,R as f,s as N,v as j,y as q,z as D,a2 as z,B as K}from"./index-54ed7ca9.js";import{_ as M}from"./chevron-back-outline-3b18af6c.js";import{_ as O}from"./home-outline-fa9c027b.js";import{_ as P}from"./settings-5944a888.js";import{T as _}from"./index-09b82474.js";import{u as Q}from"./navigator-37d80e20.js";import{u as G}from"./preferences-40ab7967.js";const J="/acchymns-dev/assets/enter-outline.svg",I="/acchymns-dev/assets/alert-circle-outline.svg",W="/acchymns-dev/assets/close.svg",s=u=>(N("data-v-2796d9e9"),u=u(),j(),u),X={class:"menu"},Y={class:"title"},Z=s(()=>t("h1",{class:"title--center"},"Import Hymnals",-1)),tt={class:"main-content"},et={class:"input-option reference-option"},st=["disabled"],ot=s(()=>t("img",{class:"ionicon enter-button-icon",src:J},null,-1)),nt=[ot],at={key:0},it={key:1,class:"warning-label-container"},lt=s(()=>t("img",{class:"ionicon warning-icon",src:I},null,-1)),ct=s(()=>t("h5",{class:"warning-label"},"The hymnals below require an internet connection",-1)),rt=[lt,ct],_t=["onClick"],dt=s(()=>t("img",{class:"ionicon ionicon-custom booktext--right add-button-icon",src:z},null,-1)),ut=[dt],mt={key:2},pt={key:3,class:"warning-label-container"},ht=s(()=>t("img",{class:"ionicon warning-icon",src:I},null,-1)),vt=s(()=>t("h5",{class:"warning-label"},"The hymnals below require an internet connection",-1)),ft=[ht,vt],gt={style:{"padding-bottom":"200px"}},wt=["onClick"],yt=s(()=>t("img",{class:"ionicon ionicon-custom add-button-icon",src:W},null,-1)),kt=[yt],bt={class:"nav"},xt=s(()=>t("img",{class:"ionicon nav__icon",src:O},null,-1)),Ct=s(()=>t("span",{class:"nav__text"},"Home",-1)),It=s(()=>t("img",{class:"ionicon nav__icon",src:q},null,-1)),St=s(()=>t("span",{class:"nav__text"},"Search",-1)),$t=s(()=>t("img",{class:"ionicon nav__icon",src:D},null,-1)),Bt=s(()=>t("span",{class:"nav__text"},"Bookmarks",-1)),Tt=s(()=>t("img",{class:"ionicon nav__icon--active",src:P},null,-1)),Vt=s(()=>t("span",{class:"nav__text"},"Settings",-1)),Ht=V({__name:"SettingsImportView",setup(u){const{back:S}=Q(),a=G("externalBooks",[]);let w=H("import_books_tooltip_complete",!1);const m=E(()=>Object.values(L).filter(o=>!a.value.includes(o))),p=R("");async function y(o,n=!0){let e=null;try{const l=new AbortController,T=setTimeout(()=>l.abort(),2e3);e=await fetch(o+"/summary.json",{method:"HEAD",signal:l.signal}),clearTimeout(T)}catch(l){if(l.name=="TypeError")return await _.show({text:"Failed to load hymnal!"}),!1;if(l.name!="AbortError")throw l}return e==null||!e.ok||e.status!=200?(await _.show({text:"Failed to load hymnal!"}),!1):a.value.includes(o)?(await _.show({text:"Hymnal already imported!"}),!1):(a.value.push(o),n&&await _.show({text:"Successfully imported hymnal!"}),!0)}async function $(o){if(o in b){const n=b[o];a.value.includes(n)?await _.show({text:`Hymnal (${o}) already imported!`}):await y(n,!1)&&await _.show({text:`Successfully imported hymnal (${o})!`})}else await _.show({text:`Unknown hymnal reference (${o})!`})}U(()=>{w.value||(w.value=!0)});function B(o){a.value=a.value.filter(n=>n!=o)}return(o,n)=>(i(),r(g,null,[t("div",X,[t("div",Y,[t("img",{onClick:n[0]||(n[0]=e=>c(S)()),class:"ionicon title--left",src:M}),Z])]),t("div",tt,[t("div",et,[A(t("input",{"onUpdate:modelValue":n[1]||(n[1]=e=>p.value=e),type:"text",class:"search-bar",placeholder:"Reference"},null,512),[[F,p.value,void 0,{trim:!0}]]),t("a",{disabled:p.value.length===0,onClick:n[2]||(n[2]=e=>$(p.value)),class:"reference-button"},nt,8,st)]),m.value.length!=0?(i(),r("h2",at,"Available Hymnals")):h("",!0),m.value.length!=0?(i(),r("div",it,rt)):h("",!0),t("div",null,[(i(!0),r(g,null,k(m.value,e=>(i(),x(C,{key:e,src:e,"with-link":!1},{default:d(()=>[t("button",{onClick:l=>y(e)},ut,8,_t)]),_:2},1032,["src"]))),128))]),c(a).length!=0?(i(),r("h2",mt,"Imported Hymnals")):h("",!0),c(a).length!=0&&m.value.length==0?(i(),r("div",pt,ft)):h("",!0),t("div",gt,[(i(!0),r(g,null,k(c(a),e=>(i(),x(C,{id:"import-book",key:e,src:e,"with-link":!1},{default:d(()=>[t("button",{onClick:l=>B(e)},kt,8,wt)]),_:2},1032,["src"]))),128))])]),t("nav",bt,[v(c(f),{to:"/",class:"nav__link"},{default:d(()=>[xt,Ct]),_:1}),v(c(f),{to:"/search",class:"nav__link"},{default:d(()=>[It,St]),_:1}),v(c(f),{to:"/bookmarks",class:"nav__link"},{default:d(()=>[$t,Bt]),_:1}),v(c(f),{to:"/settings",class:"nav__link nav__link--active"},{default:d(()=>[Tt,Vt]),_:1})])],64))}});const jt=K(Ht,[["__scopeId","data-v-2796d9e9"]]);export{jt as default};
