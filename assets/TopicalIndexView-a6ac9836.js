import{_ as B}from"./chevron-back-outline-3b18af6c.js";import{_ as z}from"./wifi_off-0a29b492.js";import{d as K,u as L,r as n,J as N,o as H,c as J,g as q,e as Q,K as U,i as W,n as X,j as Y,f as Z,a as ee,k as u,l as s,m as l,t as p,F as k,s as T,v as te,x as i,A,p as P,w as F,z as D,R as E,_ as se,B as le,C as oe,D as ae,E as ne,G as ie,H as re,I as ce}from"./index-83306a13.js";const ue=g=>(ie("data-v-2e3442d2"),g=g(),re(),g),_e={class:"menu"},de={class:"title"},ve={class:"title--center"},pe=["src"],ge={key:0,class:"fallback-container"},me=ue(()=>s("img",{class:"wifi-fallback",src:z},null,-1)),he=[me],fe={key:1,class:"main-content"},be={key:0},ke=["onClick"],ye={class:"song-title"},xe={class:"song__title"},we={class:"booktext--right"},Se={class:"song__number"},$e={key:1,class:"song-list"},Ie={class:"song__title"},Te={class:"booktext--right"},Ae={class:"song__number"},Oe=K({__name:"TopicalIndexView",props:{book:{}},setup(g){const m=g,V=L(),O=n(!1);let y=n(""),x=n("#FFFFFF"),w=n("#000000"),_=n({}),C=n(""),d=null,h=null;const G=N(()=>v.value?S.value:C.value in _.value?_.value[C.value]:[]);H((c,o)=>{le(o.fullPath),c.fullPath.includes("/display")||(oe(o.fullPath),ae(o.fullPath))}),J(async()=>{h=await q(),d=await Q(m.book),y.value=h[m.book].name.short,x.value=h[m.book].primaryColor,w.value=h[m.book].secondaryColor;const c=await U(h[m.book].name.short);if(c==null||d==null){O.value=!0;return}for(let[t,e]of Object.entries(c)){_.value[t]=[];for(let a of e)_.value[t].push({number:a,title:d[a].title,notes:d[a].notes});_.value[t].sort((a,j)=>a.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"").localeCompare(j.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"")))}$.value=Object.keys(_.value);for(const t of Object.keys(d)){let e=d[t];S.value.push({title:(e==null?void 0:e.title)??"",number:t,notes:e==null?void 0:e.notes,first_line:e==null?void 0:e.first_line})}S.value.sort((t,e)=>t.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"").localeCompare(e.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,""))),v.value?(f.value="Alphabetical Index",b.value="/acchymns-dev/assets/list-bulleted.svg"):(f.value="Topical Index",b.value="/acchymns-dev/assets/text.svg");let o=W(I.fullPath);o!=null&&o.forEach(t=>{r.value.push($.value[t])}),await X(),Y(I.fullPath)});let v=Z("isAlphabetical",!1);const S=n([]);let f=n("Topical Index"),b=n("/acchymns-dev/assets/text.svg");function M(){v.value=!v.value,v.value?(f.value="Alphabetical Index",b.value="/acchymns-dev/assets/list-bulleted.svg"):(f.value="Topical Index",b.value="/acchymns-dev/assets/text.svg"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},10)}let $=n([]),r=n([]);const I=ee();function R(c){r.value.includes(c)?r.value.splice(r.value.indexOf(c),1):r.value.push(c);let o=[];r.value.forEach(t=>{var e=$.value.indexOf(t);o.push(e)}),ne(I.fullPath,o)}return(c,o)=>(i(),u(k,null,[s("div",_e,[s("div",de,[s("img",{onClick:o[0]||(o[0]=t=>l(V).back()),class:"ionicon title--left",src:B}),s("h1",ve,p(l(f)),1),s("img",{onClick:o[1]||(o[1]=t=>M()),class:"ionicon title--right",src:l(b)},null,8,pe)])]),O.value?(i(),u("div",ge,he)):(i(),u("div",fe,[l(v)?(i(),u("div",$e,[(i(!0),u(k,null,T(G.value,t=>(i(),P(l(E),{key:t.title+t.number,to:`/display/${l(y)}/${t.number}`,class:"song",style:D(`background: linear-gradient(135deg, ${l(x)}, ${l(w)})`)},{default:F(()=>[s("div",null,[s("div",Ie,p(t.title),1)]),s("div",Te,[s("div",Ae,"#"+p(t.number),1)])]),_:2},1032,["to","style"]))),128))])):(i(),u("div",be,[(i(!0),u(k,null,T(l(_),(t,e)=>(i(),u("div",{key:e,class:"song-group-container",ref_for:!0,ref:"song_group_elements"},[s("div",{class:"song-group-title-container",onClick:a=>R(e.toString())},[s("div",ye,p(e),1),s("img",{class:A(["ionicon nav__icon dropdown-icon",{"dropdown-icon-active":l(r).includes(e.toString())}]),src:B},null,2)],8,ke),s("div",{class:A(["wrapper",{"wrapper-active":l(r).includes(e.toString())}])},[s("div",{class:A(["song-button-container",{"song-button-container-active":l(r).includes(e.toString())}])},[(i(!0),u(k,null,T(l(_)[e],a=>(i(),P(l(E),{key:a.title+a.number,to:`/display/${l(y)}/${a.number}`,class:"song topic-song",style:D(`background: linear-gradient(135deg, ${l(x)}, ${l(w)})`)},{default:F(()=>[s("div",null,[s("div",xe,p(a.title),1)]),s("div",we,[s("div",Se,"#"+p(a.number),1)])]),_:2},1032,["to","style"]))),128))],2)],2)]))),128))]))])),te(se,{current_page:"home"})],64))}});const Fe=ce(Oe,[["__scopeId","data-v-2e3442d2"]]);export{Fe as default};
