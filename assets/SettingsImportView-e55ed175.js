import{d as T,a as V,C as H,$ as E,r as L,K as R,e as c,f as e,E as U,Q as A,k as h,F as g,l as k,h as r,m as v,w as d,a0 as b,n as i,i as x,a1 as C,R as f,s as F,v as N,y as j,z as q,a2 as D,B as z}from"./index-6743d1e1.js";import{_ as K}from"./chevron-back-outline-3b18af6c.js";import{_ as M}from"./home-outline-fa9c027b.js";import{_ as O}from"./settings-5944a888.js";import{T as _}from"./index-7c5a2725.js";import{u as P}from"./navigator-ab7bc04c.js";import{u as Q}from"./preferences-29f0154c.js";const G="/acchymns-dev/assets/enter-outline.svg",I="/acchymns-dev/assets/alert-circle-outline.svg",J="/acchymns-dev/assets/close.svg",s=u=>(F("data-v-2ebe20d3"),u=u(),N(),u),W={class:"menu"},X={class:"title"},Y=s(()=>e("h1",{class:"title--center"},"Import Hymnals",-1)),Z={class:"main-content"},ee={class:"input-option reference-option"},te=["disabled"],se=s(()=>e("img",{class:"ionicon enter-button-icon",src:G},null,-1)),oe=[se],ne={key:0},ae={key:1,class:"warning-label-container"},ie=s(()=>e("img",{class:"ionicon warning-icon",src:I},null,-1)),le=s(()=>e("h5",{class:"warning-label"},"The hymnals below require an internet connection",-1)),ce=[ie,le],re=["onClick"],_e=s(()=>e("img",{class:"ionicon ionicon-custom booktext--right add-button-icon",src:D},null,-1)),de=[_e],ue={key:2},me={key:3,class:"warning-label-container"},pe=s(()=>e("img",{class:"ionicon warning-icon",src:I},null,-1)),he=s(()=>e("h5",{class:"warning-label"},"The hymnals below require an internet connection",-1)),ve=[pe,he],fe={style:{"padding-bottom":"200px"}},ge=["onClick"],we=s(()=>e("img",{class:"ionicon ionicon-custom add-button-icon",src:J},null,-1)),ye=[we],ke={class:"nav"},be=s(()=>e("img",{class:"ionicon nav__icon",src:M},null,-1)),xe=s(()=>e("span",{class:"nav__text"},"Home",-1)),Ce=s(()=>e("img",{class:"ionicon nav__icon",src:j},null,-1)),Ie=s(()=>e("span",{class:"nav__text"},"Search",-1)),$e=s(()=>e("img",{class:"ionicon nav__icon",src:q},null,-1)),Se=s(()=>e("span",{class:"nav__text"},"Bookmarks",-1)),Be=s(()=>e("img",{class:"ionicon nav__icon--active",src:O},null,-1)),Te=s(()=>e("span",{class:"nav__text"},"Settings",-1)),Ve=T({__name:"SettingsImportView",setup(u){P();const a=Q("externalBooks",[]);let w=V("import_books_tooltip_complete",!1);const m=H(()=>Object.values(E).filter(o=>!a.value.includes(o))),p=L("");async function y(o,n=!0){let t=null;try{const l=new AbortController,B=setTimeout(()=>l.abort(),2e3);t=await fetch(o+"/summary.json",{method:"HEAD",signal:l.signal}),clearTimeout(B)}catch(l){if(l.name=="TypeError")return await _.show({text:"Failed to load hymnal!"}),!1;if(l.name!="AbortError")throw l}return t==null||!t.ok||t.status!=200?(await _.show({text:"Failed to load hymnal!"}),!1):a.value.includes(o)?(await _.show({text:"Hymnal already imported!"}),!1):(a.value.push(o),n&&await _.show({text:"Successfully imported hymnal!"}),!0)}async function $(o){if(o in b){const n=b[o];a.value.includes(n)?await _.show({text:`Hymnal (${o}) already imported!`}):await y(n,!1)&&await _.show({text:`Successfully imported hymnal (${o})!`})}else await _.show({text:`Unknown hymnal reference (${o})!`})}R(()=>{w.value||(w.value=!0)});function S(o){a.value=a.value.filter(n=>n!=o)}return(o,n)=>(i(),c(g,null,[e("div",W,[e("div",X,[e("img",{onClick:n[0]||(n[0]=t=>o.$router.back()),class:"ionicon title--left",src:K}),Y])]),e("div",Z,[e("div",ee,[U(e("input",{"onUpdate:modelValue":n[1]||(n[1]=t=>p.value=t),type:"text",class:"search-bar",placeholder:"Reference"},null,512),[[A,p.value,void 0,{trim:!0}]]),e("a",{disabled:p.value.length===0,onClick:n[2]||(n[2]=t=>$(p.value)),class:"reference-button"},oe,8,te)]),m.value.length!=0?(i(),c("h2",ne,"Available Hymnals")):h("",!0),m.value.length!=0?(i(),c("div",ae,ce)):h("",!0),e("div",null,[(i(!0),c(g,null,k(m.value,t=>(i(),x(C,{key:t,src:t,"with-link":!1},{default:d(()=>[e("button",{onClick:l=>y(t)},de,8,re)]),_:2},1032,["src"]))),128))]),r(a).length!=0?(i(),c("h2",ue,"Imported Hymnals")):h("",!0),r(a).length!=0&&m.value.length==0?(i(),c("div",me,ve)):h("",!0),e("div",fe,[(i(!0),c(g,null,k(r(a),t=>(i(),x(C,{id:"import-book",key:t,src:t,"with-link":!1},{default:d(()=>[e("button",{onClick:l=>S(t)},ye,8,ge)]),_:2},1032,["src"]))),128))])]),e("nav",ke,[v(r(f),{to:"/",class:"nav__link"},{default:d(()=>[be,xe]),_:1}),v(r(f),{to:"/search",class:"nav__link"},{default:d(()=>[Ce,Ie]),_:1}),v(r(f),{to:"/bookmarks",class:"nav__link"},{default:d(()=>[$e,Se]),_:1}),v(r(f),{to:"/settings",class:"nav__link nav__link--active"},{default:d(()=>[Be,Te]),_:1})])],64))}});const Ne=z(Ve,[["__scopeId","data-v-2ebe20d3"]]);export{Ne as default};
