import{d as M,r as s,c as G,a7 as K,$ as T,k as c,m as l,l as a,t as r,q as S,z as m,F as U,s as A,x as u,G as F,H as q,L as H}from"./index-a740d7c4.js";import{v as P,r as $,g as j}from"./broadcast-4e35a840.js";const I=v=>(F("data-v-224dc38c"),v=v(),q(),v),J={class:"info-seperator"},Q={key:0,class:"song-info"},W={class:"bottom-text"},X={class:"digital-clock"},Y={key:1,class:"song-info"},Z={class:"song-number"},ee={key:0,class:"verses-label"},te={key:1,class:"digital-clock"},se={key:2,class:"clock"},oe=I(()=>a("div",{class:"dot"},null,-1)),le=I(()=>a("div",null,null,-1)),ae=M({__name:"BroadcastView",setup(v){let h=s(!1),y=s(""),i=s(""),d=s(""),k=s(""),g=s(""),f=s(!1),_=s(!1),b=s(""),p=s(""),R=s([]);function O(){const e=new Date,t=e.getHours(),o=e.getMinutes(),n=e.getSeconds();return{hours:t,minutes:o,seconds:n}}function B(){let e=O(),t=e.hours*30+e.minutes*(360/720),o=e.minutes*6+e.seconds*(360/3600),n=e.seconds*6;w.value="rotate("+t+"deg)",z.value="rotate("+o+"deg)",L.value="rotate("+n+"deg)"}function E(){let e=O(),t=e.hours,o=e.minutes,n=t>=12?"PM":"AM";return t=t%12,t=t||12,t+":"+(o<10?"0"+o:o)+" "+n}let x;function D(e){var t=35;if(e>=t)return"8em"}async function V(){let e=(await j(x,y.value)).Item;if(_.value=e.BOOK_ID.S=="BIBLE",_.value)b.value=e.SONG_NUMBER.S,p.value=e.BOOK_COLOR.S;else{if(i.value=e.SONG_NUMBER.S,f.value=!1,e.VERSES.NS[0]==-1)d.value="";else if(e.VERSES.NS[0]==-2)d.value="All Verses";else{e.VERSES.NS.sort((o,n)=>o-n),R.value=e.VERSES.NS,d.value=e.VERSES.NS.join(", "),f.value=!0;let t=N.value;t&&(t.style.fontSize=D(d.value.length)||"10em")}k.value=e.BOOK_COLOR.S,g.value=e.BOOK_ID.S}i.value.length>0||_.value?document.body.style.backgroundColor="white":document.body.style.backgroundColor=e.BG_COLOR.S}let C="";const N=s();G(async()=>{C=document.body.style.backgroundColor,document.body.style.backgroundColor="white",document.body.style.transition="background-color 1s",B(),setInterval(B,100),setInterval(V,2e3);let e=await K.get({key:"broadcasting_auth_token"}),t=await P(e.value||"");if(h.value=t.status==200,y.value=t.data.church_id,console.log("Authorized: "+h.value),!h.value){g.value="Unauthorized";return}x=$(),V()}),T(()=>{document.body.style.backgroundColor=C});let w=s(""),z=s(""),L=s("");return(e,t)=>(u(),c("div",J,[l(_)?(u(),c("div",Q,[a("h2",{ref:"top_text_element",class:"top-text"},r(l(b)),513),a("h2",W,r(l(p)),1),a("h2",X,r(E()),1)])):(u(),c("div",Y,[a("h1",Z,r(l(i)),1),l(f)?(u(),c("h3",ee,"Verses:")):S("",!0),a("h2",{class:"verses",ref_key:"verses_text",ref:N},r(l(d)),513),a("h2",{class:"book-name",style:m({color:l(k)})},r(l(g)),5),l(i).length>0?(u(),c("h2",te,r(E()),1)):S("",!0)])),l(i).length==0&&!l(_)?(u(),c("div",se,[oe,a("div",null,[a("div",{class:"hour-hand",style:m({transform:l(w)})},null,4),a("div",{class:"minute-hand",style:m({transform:l(z)})},null,4)]),le,(u(),c(U,null,A(61,o=>a("div",{class:"diallines",key:o,style:m({transform:"rotate("+6*(o-2)+"deg)"})},null,4)),64))])):S("",!0)]))}});const ue=H(ae,[["__scopeId","data-v-224dc38c"]]);export{ue as default};
