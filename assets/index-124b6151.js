import{a8 as $,a9 as N,aa as Y,ab as x,ac as B,r as C,O as P,c as _,ad as a,f as F}from"./index-229ae8ba.js";function D(e){return $()?(N(e),!0):!1}const I=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const G=Object.prototype.toString,H=e=>G.call(e)==="[object Object]",y=()=>{},A=X();function X(){var e,t;return I&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function b(e){return Array.isArray(e)?e:[e]}function q(...e){if(e.length!==1)return Y(...e);const t=e[0];return typeof t=="function"?x(B(()=>({get:t,set:y}))):C(t)}function V(e,t,o){return P(e,t,{...o,immediate:!0})}const R=I?window:void 0;function w(e){var t;const o=a(e);return(t=o==null?void 0:o.$el)!=null?t:o}function v(...e){const t=[],o=()=>{t.forEach(n=>n()),t.length=0},i=(n,l,s,d)=>(n.addEventListener(l,s,d),()=>n.removeEventListener(l,s,d)),c=_(()=>{const n=b(a(e[0])).filter(l=>l!=null);return n.every(l=>typeof l!="string")?n:void 0}),p=V(()=>{var n,l;return[(l=(n=c.value)==null?void 0:n.map(s=>w(s)))!=null?l:[R].filter(s=>s!=null),b(a(c.value?e[1]:e[0])),b(F(c.value?e[2]:e[1])),a(c.value?e[3]:e[2])]},([n,l,s,d])=>{if(o(),!(n!=null&&n.length)||!(l!=null&&l.length)||!(s!=null&&s.length))return;const g=H(d)?{...d}:d;t.push(...n.flatMap(h=>l.flatMap(k=>s.map(W=>i(h,k,W,g)))))},{flush:"post"}),m=()=>{p(),o()};return D(o),m}let M=!1;function T(e,t,o={}){const{window:i=R,ignore:c=[],capture:p=!0,detectIframe:m=!1}=o;if(!i)return y;if(A&&!M){M=!0;const u={passive:!0};Array.from(i.document.body.children).forEach(r=>v(r,"click",y,u)),v(i.document.documentElement,"click",y,u)}let n=!0;const l=u=>a(c).some(r=>{if(typeof r=="string")return Array.from(i.document.querySelectorAll(r)).some(f=>f===u.target||u.composedPath().includes(f));{const f=w(r);return f&&(u.target===f||u.composedPath().includes(f))}});function s(u){const r=a(u);return r&&r.$.subTree.shapeFlag===16}function d(u,r){const f=a(u),O=f.$.subTree&&f.$.subTree.children;return O==null||!Array.isArray(O)?!1:O.some(L=>L.el===r.target||r.composedPath().includes(L.el))}const g=u=>{const r=w(e);if(u.target!=null&&!(!(r instanceof Element)&&s(e)&&d(e,u))&&!(!r||r===u.target||u.composedPath().includes(r))){if(u.detail===0&&(n=!l(u)),!n){n=!0;return}t(u)}};let h=!1;const k=[v(i,"click",u=>{h||(h=!0,setTimeout(()=>{h=!1},0),g(u))},{passive:!0,capture:p}),v(i,"pointerdown",u=>{const r=w(e);n=!l(u)&&!!(r&&!u.composedPath().includes(r))},{passive:!0}),m&&v(i,"blur",u=>{setTimeout(()=>{var r;const f=w(e);((r=i.document.activeElement)==null?void 0:r.tagName)==="IFRAME"&&!(f!=null&&f.contains(i.document.activeElement))&&t(u)},0)},{passive:!0})].filter(Boolean);return()=>k.forEach(u=>u())}const U={mounted(e,t){const o=!t.modifiers.bubble;if(typeof t.value=="function")e.__onClickOutside_stop=T(e,t.value,{capture:o});else{const[i,c]=t.value;e.__onClickOutside_stop=T(e,i,Object.assign({capture:o},c))}},unmounted(e){e.__onClickOutside_stop()}};function E(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}function j(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const o=e.parentNode;return!o||o.tagName==="BODY"?!1:j(o)}}function z(e){const t=e||window.event,o=t.target;return j(o)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}const S=new WeakMap;function J(e,t=!1){const o=C(t);let i=null,c="";P(q(e),n=>{const l=E(a(n));if(l){const s=l;if(S.get(s)||S.set(s,s.style.overflow),s.style.overflow!=="hidden"&&(c=s.style.overflow),s.style.overflow==="hidden")return o.value=!0;if(o.value)return s.style.overflow="hidden"}},{immediate:!0});const p=()=>{const n=E(a(e));!n||o.value||(A&&(i=v(n,"touchmove",l=>{z(l)},{passive:!1})),n.style.overflow="hidden",o.value=!0)},m=()=>{const n=E(a(e));!n||!o.value||(A&&(i==null||i()),n.style.overflow=c,S.delete(n),o.value=!1)};return D(m),_({get(){return o.value},set(n){n?p():m()}})}function K(){let e=!1;const t=C(!1);return(o,i)=>{if(t.value=i.value,e)return;e=!0;const c=J(o,i.value);P(t,p=>c.value=p)}}K();export{U as v};
