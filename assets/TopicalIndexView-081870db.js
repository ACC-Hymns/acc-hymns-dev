import{_ as M}from"./chevron-back-outline-3b18af6c.js";import{_ as J}from"./wifi_off-0a29b492.js";import{d as q,u as Q,r as a,M as U,o as W,c as X,g as Y,e as Z,N as ee,i as te,n as se,j as oe,f as le,a as ae,k as _,l as e,t as h,m as o,F as w,s as P,v as S,w as m,x as i,A as F,p as V,z as G,R as g,B as ne,C as ie,D as ce,E as re,G as _e,H as ue,_ as de,I as ve,J as pe,K as he,L as me}from"./index-d533114a.js";const u=f=>(_e("data-v-3d741265"),f=f(),ue(),f),ge={class:"menu"},fe={class:"title"},be={class:"title--center"},ke=["src"],ye={key:0,class:"fallback-container"},xe=u(()=>e("img",{class:"wifi-fallback",src:J},null,-1)),we=[xe],Se={key:1,class:"main-content"},$e={key:0},Te=["onClick"],Ie={class:"song-title"},Ae={class:"song__title"},Oe={class:"booktext--right"},Be={class:"song__number"},Ce={key:1,class:"song-list"},Pe={class:"song__title"},Fe={class:"booktext--right"},De={class:"song__number"},Ee={class:"nav"},Me=u(()=>e("img",{class:"ionicon nav__icon--active",src:de},null,-1)),Ve=u(()=>e("span",{class:"nav__text"},"Home",-1)),Ge=u(()=>e("img",{class:"ionicon nav__icon",src:ve},null,-1)),Le=u(()=>e("span",{class:"nav__text"},"Search",-1)),Re=u(()=>e("img",{class:"ionicon nav__icon",src:pe},null,-1)),je=u(()=>e("span",{class:"nav__text"},"Bookmarks",-1)),Ne=u(()=>e("img",{class:"ionicon nav__icon",src:he},null,-1)),ze=u(()=>e("span",{class:"nav__text"},"Settings",-1)),Ke=q({__name:"TopicalIndexView",props:{book:{}},setup(f){const b=f,L=Q(),D=a(!0),E=a(!1);a(null);let $=a(""),T=a("#FFFFFF"),I=a("#000000"),d=a({}),A=a(""),v=null,k=null;const R=U(()=>p.value?O.value:A.value in d.value?d.value[A.value]:[]);W((r,l)=>{ne(l.fullPath),r.fullPath.includes("/display")||(ie(l.fullPath),ce(l.fullPath))}),X(async()=>{k=await Y(),v=await Z(b.book),$.value=k[b.book].name.short,T.value=k[b.book].primaryColor,I.value=k[b.book].secondaryColor;const r=await ee(k[b.book].name.short);if(r==null||v==null){E.value=!0;return}for(let[s,t]of Object.entries(r)){d.value[s]=[];for(let n of t)d.value[s].push({number:n,title:v[n].title,notes:v[n].notes});d.value[s].sort((n,H)=>n.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"").localeCompare(H.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"")))}B.value=Object.keys(d.value);for(const s of Object.keys(v)){let t=v[s];O.value.push({title:(t==null?void 0:t.title)??"",number:s,notes:t==null?void 0:t.notes,first_line:t==null?void 0:t.first_line})}O.value.sort((s,t)=>s.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"").localeCompare(t.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,""))),p.value?(y.value="Alphabetical Index",x.value="/acchymns-dev/assets/list-bulleted.svg"):(y.value="Topical Index",x.value="/acchymns-dev/assets/text.svg");let l=te(C.fullPath);l!=null&&l.forEach(s=>{c.value.push(B.value[s])}),await se(),oe(C.fullPath)});function j(){D.value=!0,A.value="",setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},10)}function N(){D.value?L.back():j()}let p=le("isAlphabetical",!1);const O=a([]);let y=a("Topical Index"),x=a("/acchymns-dev/assets/text.svg");function z(){p.value=!p.value,p.value?(y.value="Alphabetical Index",x.value="/acchymns-dev/assets/list-bulleted.svg"):(y.value="Topical Index",x.value="/acchymns-dev/assets/text.svg"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},10)}let B=a([]),c=a([]);const C=ae();function K(r){c.value.includes(r)?c.value.splice(c.value.indexOf(r),1):c.value.push(r);let l=[];c.value.forEach(s=>{var t=B.value.indexOf(s);l.push(t)}),re(C.fullPath,l)}return(r,l)=>(i(),_(w,null,[e("div",ge,[e("div",fe,[e("img",{onClick:l[0]||(l[0]=s=>N()),class:"ionicon title--left",src:M}),e("h1",be,h(o(y)),1),e("img",{onClick:l[1]||(l[1]=s=>z()),class:"ionicon title--right",src:o(x)},null,8,ke)])]),E.value?(i(),_("div",ye,we)):(i(),_("div",Se,[o(p)?(i(),_("div",Ce,[(i(!0),_(w,null,P(R.value,s=>(i(),V(o(g),{key:s.title+s.number,to:`/display/${o($)}/${s.number}`,class:"song",style:G(`background: linear-gradient(135deg, ${o(T)}, ${o(I)})`)},{default:m(()=>[e("div",null,[e("div",Pe,h(s.title),1)]),e("div",Fe,[e("div",De,"#"+h(s.number),1)])]),_:2},1032,["to","style"]))),128))])):(i(),_("div",$e,[(i(!0),_(w,null,P(o(d),(s,t)=>(i(),_("div",{key:t,class:"song-group-container",ref_for:!0,ref:"song_group_elements"},[e("div",{class:"song-group-title-container",onClick:n=>K(t.toString())},[e("div",Ie,h(t),1),e("img",{class:F(["ionicon nav__icon dropdown-icon",{"dropdown-icon-active":o(c).includes(t.toString())}]),src:M},null,2)],8,Te),e("div",{class:F(["wrapper",{"wrapper-active":o(c).includes(t.toString())}])},[e("div",{class:F(["song-button-container",{"song-button-container-active":o(c).includes(t.toString())}])},[(i(!0),_(w,null,P(o(d)[t],n=>(i(),V(o(g),{key:n.title+n.number,to:`/display/${o($)}/${n.number}`,class:"song topic-song",style:G(`background: linear-gradient(135deg, ${o(T)}, ${o(I)})`)},{default:m(()=>[e("div",null,[e("div",Ae,h(n.title),1)]),e("div",Oe,[e("div",Be,"#"+h(n.number),1)])]),_:2},1032,["to","style"]))),128))],2)],2)]))),128))]))])),e("nav",Ee,[S(o(g),{to:"/",class:"nav__link nav__link--active"},{default:m(()=>[Me,Ve]),_:1}),S(o(g),{to:"/search",class:"nav__link"},{default:m(()=>[Ge,Le]),_:1}),S(o(g),{to:"/bookmarks",class:"nav__link"},{default:m(()=>[Re,je]),_:1}),S(o(g),{to:"/settings",class:"nav__link"},{default:m(()=>[Ne,ze]),_:1})])],64))}});const Qe=me(Ke,[["__scopeId","data-v-3d741265"]]);export{Qe as default};
