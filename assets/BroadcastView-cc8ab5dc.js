import{d as G,r as o,c as K,a7 as T,$ as U,k as n,m as l,l as a,t as r,q as y,z as v,F as w,s as D,x as c,A as F,G as q,H,L as P}from"./index-cd4b36b7.js";import{v as $,r as j,g as J}from"./broadcast-9da549c0.js";const Q=m=>(q("data-v-cfc5971b"),m=m(),H(),m),W={class:"info-seperator"},X={key:0,class:"song-info"},Y={class:"bottom-text"},Z={class:"digital-clock"},ee={key:1,class:"song-info"},te={class:"song-number"},se={key:0,class:"verses-label"},oe={key:1,class:"digital-clock"},le={key:2,class:"clock"},ae=Q(()=>a("div",{class:"dot"},null,-1)),ne=G({__name:"BroadcastView",setup(m){let h=o(!1),b=o(""),i=o(""),d=o(""),k=o(""),f=o(""),g=o(!1),_=o(!1),p=o(""),O=o(""),L=o([]),S=o("");function B(){const e=new Date,t=e.getHours(),s=e.getMinutes(),u=e.getSeconds();return{hours:t,minutes:s,seconds:u}}function E(){let e=B(),t=e.hours*30+e.minutes*(360/720),s=e.minutes*6+e.seconds*(360/3600),u=e.seconds*6;N.value="rotate("+t+"deg)",I.value="rotate("+s+"deg)",R.value="rotate("+u+"deg)",S.value=M()}function M(){let e=B(),t=e.hours,s=e.minutes,u=t>=12?"PM":"AM";return t=t%12,t=t||12,t+":"+(s<10?"0"+s:s)+" "+u}let x;function A(e){var t=35;if(e>=t)return"8em"}async function C(){let e=(await J(x,b.value)).Item;if(_.value=e.BOOK_ID.S=="BIBLE",_.value)p.value=e.SONG_NUMBER.S,O.value=e.BOOK_COLOR.S;else{if(i.value=e.SONG_NUMBER.S,g.value=!1,e.VERSES.NS[0]==-1)d.value="";else if(e.VERSES.NS[0]==-2)d.value="All Verses";else{e.VERSES.NS.sort((s,u)=>s-u),L.value=e.VERSES.NS,d.value=e.VERSES.NS.join(", "),g.value=!0;let t=z.value;t&&(t.style.fontSize=A(d.value.length)||"10em")}k.value=e.BOOK_COLOR.S,f.value=e.BOOK_ID.S}i.value.length>0||_.value?document.body.style.backgroundColor="#b49264":document.body.style.backgroundColor=e.BG_COLOR.S}let V="";const z=o();K(async()=>{V=document.body.style.backgroundColor,document.body.style.backgroundColor="#b49264",document.body.style.transition="background-color 1s",E(),setInterval(E,100),setInterval(C,2e3);let e=await T.get({key:"broadcasting_auth_token"}),t=await $(e.value||"");if(h.value=t.status==200,b.value=t.data.church_id,console.log("Authorized: "+h.value),!h.value){f.value="Unauthorized";return}x=j(),C()}),U(()=>{document.body.style.backgroundColor=V});let N=o(""),I=o(""),R=o("");return(e,t)=>(c(),n("div",W,[l(_)?(c(),n("div",X,[a("h2",{ref:"top_text_element",class:"top-text"},r(l(p)),513),a("h2",Y,r(l(O)),1),a("h2",Z,r(l(S)),1)])):(c(),n("div",ee,[a("h1",te,r(l(i)),1),l(g)?(c(),n("h3",se,"Verses:")):y("",!0),a("h2",{class:"verses",ref_key:"verses_text",ref:z},r(l(d)),513),a("h2",{class:"book-name",style:v({color:l(k)})},r(l(f)),5),l(i).length>0?(c(),n("h2",oe,r(l(S)),1)):y("",!0)])),l(i).length==0&&!l(_)?(c(),n("div",le,[ae,a("div",null,[a("div",{class:"hour-hand",style:v({transform:l(N)})},null,4),a("div",{class:"minute-hand",style:v({transform:l(I)})},null,4),a("div",{class:"second-hand",style:v({transform:l(R)})},null,4)]),a("div",null,[(c(),n(w,null,D(12,s=>a("span",{class:F("h"+s)},r(s),3)),64))]),(c(),n(w,null,D(61,s=>a("div",{class:"diallines",key:s,style:v({transform:"rotate("+6*(s-2)+"deg)"})},null,4)),64))])):y("",!0)]))}});const ie=P(ne,[["__scopeId","data-v-cfc5971b"]]);export{ie as default};
