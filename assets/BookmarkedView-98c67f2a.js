import{d as g,r as d,H as k,S as B,c as S,g as w,a4 as x,k as p,l as a,X as A,a8 as D,m as u,P as M,F as b,s as C,p as v,q as T,x as l,w as V,t as c,z,R as L,_ as $}from"./index-51597a59.js";import{s as _,K as f}from"./index-54065c66.js";const q={class:"search-bar"},E={class:"songlist"},K={class:"song__title"},N={class:"book__title"},O={class:"booktext--right"},R={class:"song__number"},G=g({__name:"BookmarkedView",setup(F){let r=d(""),i=k(()=>_(r.value)),m=d([]),h=k(()=>m.value.filter(o=>{var t,e,s;return((t=o.stripped_title)==null?void 0:t.includes(i.value))||((e=o==null?void 0:o.stripped_first_line)==null?void 0:e.includes(i.value))||((s=o==null?void 0:o.number)==null?void 0:s.includes(i.value))}).sort((o,t)=>o.title.localeCompare(t.title)));const y=B("bookmarks",[]);S(async()=>{const o=await w(),t=await x();for(const e of y.value){if(t[e.book]==null)continue;const s=t[e.book][e.number];m.value.push({title:s.title??"",number:e.number,book:o[e.book],stripped_title:_(s.title??""),stripped_first_line:_(s.first_line??"")})}});const n=d(!1);return f.addListener("keyboardDidShow",()=>{n.value=!0}),f.addListener("keyboardDidHide",()=>{n.value=!1}),(o,t)=>(l(),p(b,null,[t[2]||(t[2]=a("h1",{class:"pagetitle"},"Bookmarks",-1)),a("div",q,[A(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>M(r)?r.value=e:r=e),placeholder:"Search for a song title or number...","aria-label":"Search through site content"},null,512),[[D,u(r)]]),t[1]||(t[1]=a("button",{disabled:""},[a("svg",{viewBox:"0 0 1024 1024"},[a("path",{class:"path1",d:"M848.471 928l-263.059-263.059c-48.941 36.706-110.118 55.059-177.412 55.059-171.294 0-312-140.706-312-312s140.706-312 312-312c171.294 0 312 140.706 312 312 0 67.294-24.471 128.471-55.059 177.412l263.059 263.059-79.529 79.529zM189.623 408.078c0 121.364 97.091 218.455 218.455 218.455s218.455-97.091 218.455-218.455c0-121.364-103.159-218.455-218.455-218.455-121.364 0-218.455 97.091-218.455 218.455z"})])],-1))]),t[3]||(t[3]=a("h2",null,"Bookmarked Songs",-1)),a("div",E,[(l(!0),p(b,null,C(u(h),e=>(l(),v(u(L),{key:e.book.name.short+e.number,to:`/display/${e.book.name.short}/${e.number}`,class:"song",style:z(`background: linear-gradient(135deg, ${e.book.primaryColor}, ${e.book.secondaryColor})`)},{default:V(()=>[a("div",null,[a("div",K,c(e.title),1),a("div",N,c(e.book.name.medium),1)]),a("div",O,[a("div",R,"#"+c(e.number),1)])]),_:2},1032,["to","style"]))),128))]),n.value?T("",!0):(l(),v($,{key:0,current_page:"bookmarks"}))],64))}});export{G as default};
