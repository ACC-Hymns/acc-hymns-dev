import{d as V,a as H,B as A,$ as L,r as R,P as U,c as r,e as t,f as c,D as E,Q as F,j as h,F as g,k,l as v,w as d,a0 as b,m as i,h as x,a1 as I,R as f,q as N,s as j,x as q,y as D,a2 as P,A as M}from"./index-49c23a0b.js";import{_ as O}from"./chevron-back-outline-3b18af6c.js";import{_ as Q}from"./home-outline-fa9c027b.js";import{_ as z}from"./settings-5944a888.js";import{T as _}from"./index-11dae09b.js";import{u as G}from"./navigator-8cf286ce.js";import{u as J}from"./preferences-2d4acfad.js";const K="/acchymns-dev/assets/enter-outline.svg",C="/acchymns-dev/assets/alert-circle-outline.svg",W="/acchymns-dev/assets/close.svg",s=u=>(N("data-v-e3d47113"),u=u(),j(),u),X={class:"menu"},Y={class:"title"},Z=s(()=>t("h1",{class:"title--center"},"Import Hymnals",-1)),tt={class:"main-content"},et={class:"input-option reference-option"},st=["disabled"],ot=s(()=>t("img",{class:"ionicon enter-button-icon",src:K},null,-1)),nt=[ot],at={key:0},it={key:1,class:"warning-label-container"},lt=s(()=>t("img",{class:"ionicon warning-icon",src:C},null,-1)),ct=s(()=>t("h5",{class:"warning-label"},"The hymnals below require an internet connection",-1)),rt=[lt,ct],_t=["onClick"],dt=s(()=>t("img",{class:"ionicon ionicon-custom booktext--right add-button-icon",src:P},null,-1)),ut=[dt],mt={key:2},pt={key:3,class:"warning-label-container"},ht=s(()=>t("img",{class:"ionicon warning-icon",src:C},null,-1)),vt=s(()=>t("h5",{class:"warning-label"},"The hymnals below require an internet connection",-1)),ft=[ht,vt],gt={style:{"padding-bottom":"200px"}},wt=["onClick"],yt=s(()=>t("img",{class:"ionicon ionicon-custom add-button-icon",src:W},null,-1)),kt=[yt],bt={class:"nav"},xt=s(()=>t("img",{class:"ionicon nav__icon",src:Q},null,-1)),It=s(()=>t("span",{class:"nav__text"},"Home",-1)),Ct=s(()=>t("img",{class:"ionicon nav__icon",src:q},null,-1)),St=s(()=>t("span",{class:"nav__text"},"Search",-1)),$t=s(()=>t("img",{class:"ionicon nav__icon",src:D},null,-1)),Bt=s(()=>t("span",{class:"nav__text"},"Bookmarks",-1)),Tt=s(()=>t("img",{class:"ionicon nav__icon--active",src:z},null,-1)),Vt=s(()=>t("span",{class:"nav__text"},"Settings",-1)),Ht=V({__name:"SettingsImportView",setup(u){const{back:S}=G(),a=J("externalBooks",[]);let w=H("import_books_tooltip_complete",!1);const m=A(()=>Object.values(L).filter(o=>!a.value.includes(o))),p=R("");async function y(o,n=!0){let e=null;try{const l=new AbortController,T=setTimeout(()=>l.abort(),2e3);e=await fetch(o+"/summary.json",{method:"HEAD",signal:l.signal}),clearTimeout(T)}catch(l){if(l.name=="TypeError")return await _.show({text:"Failed to load hymnal!"}),!1;if(l.name!="AbortError")throw l}return e==null||!e.ok||e.status!=200?(await _.show({text:"Failed to load hymnal!"}),!1):a.value.includes(o)?(await _.show({text:"Hymnal already imported!"}),!1):(a.value.push(o),n&&await _.show({text:"Successfully imported hymnal!"}),!0)}async function $(o){if(o in b){const n=b[o];a.value.includes(n)?await _.show({text:`Hymnal (${o}) already imported!`}):await y(n,!1)&&await _.show({text:`Successfully imported hymnal (${o})!`})}else await _.show({text:`Unknown hymnal reference (${o})!`})}U(()=>{w.value||(w.value=!0)});function B(o){a.value=a.value.filter(n=>n!=o)}return(o,n)=>(i(),r(g,null,[t("div",X,[t("div",Y,[t("img",{onClick:n[0]||(n[0]=e=>c(S)()),class:"ionicon title--left",src:O}),Z])]),t("div",tt,[t("div",et,[E(t("input",{"onUpdate:modelValue":n[1]||(n[1]=e=>p.value=e),type:"text",class:"search-bar",placeholder:"Reference"},null,512),[[F,p.value,void 0,{trim:!0}]]),t("a",{disabled:p.value.length===0,onClick:n[2]||(n[2]=e=>$(p.value)),class:"reference-button"},nt,8,st)]),m.value.length!=0?(i(),r("h2",at,"Available Hymnals")):h("",!0),m.value.length!=0?(i(),r("div",it,rt)):h("",!0),t("div",null,[(i(!0),r(g,null,k(m.value,e=>(i(),x(I,{key:e,src:e,"with-link":!1},{default:d(()=>[t("button",{onClick:l=>y(e)},ut,8,_t)]),_:2},1032,["src"]))),128))]),c(a).length!=0?(i(),r("h2",mt,"Imported Hymnals")):h("",!0),c(a).length!=0&&m.value.length==0?(i(),r("div",pt,ft)):h("",!0),t("div",gt,[(i(!0),r(g,null,k(c(a),e=>(i(),x(I,{id:"import-book",key:e,src:e,"with-link":!1},{default:d(()=>[t("button",{onClick:l=>B(e)},kt,8,wt)]),_:2},1032,["src"]))),128))])]),t("nav",bt,[v(c(f),{to:"/",class:"nav__link"},{default:d(()=>[xt,It]),_:1}),v(c(f),{to:"/search",class:"nav__link"},{default:d(()=>[Ct,St]),_:1}),v(c(f),{to:"/bookmarks",class:"nav__link"},{default:d(()=>[$t,Bt]),_:1}),v(c(f),{to:"/settings",class:"nav__link nav__link--active"},{default:d(()=>[Tt,Vt]),_:1})])],64))}});const jt=M(Ht,[["__scopeId","data-v-e3d47113"]]);export{jt as default};
