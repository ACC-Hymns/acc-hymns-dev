import{d as L,u as N,r as a,B as R,o as j,g as z,b as K,C as q,c as i,e,f as t,p as w,t as g,j as I,F as b,k as $,l as y,w as h,m as n,D as G,E as H,h as J,R as k,q as P,s as Q,v as U,x as W,y as X,z as Y,A as Z}from"./index-663b581a.js";import{_ as ee}from"./chevron-back-outline-3b18af6c.js";import{_ as te}from"./wifi_off-0a29b492.js";const o=p=>(P("data-v-95922d86"),p=p(),Q(),p),se={class:"menu"},oe={class:"title"},ae=o(()=>e("h1",{class:"title--center"},"Topical Index",-1)),ne={key:0,class:"fallback-container"},le=o(()=>e("img",{class:"wifi-fallback",src:te},null,-1)),ie=[le],ce={key:1,class:"main-content"},_e={class:"topic-title"},re={class:"song__title"},ue={class:"booktext--right"},de={class:"song__number"},ve={class:"topic-list"},pe=["onClick"],me={class:"topic-title"},he={class:"nav"},ke=o(()=>e("img",{class:"ionicon nav__icon--active",src:U},null,-1)),fe=o(()=>e("span",{class:"nav__text"},"Home",-1)),ge=o(()=>e("img",{class:"ionicon nav__icon",src:W},null,-1)),be=o(()=>e("span",{class:"nav__text"},"Search",-1)),ye=o(()=>e("img",{class:"ionicon nav__icon",src:X},null,-1)),xe=o(()=>e("span",{class:"nav__text"},"Bookmarks",-1)),we=o(()=>e("img",{class:"ionicon nav__icon",src:Y},null,-1)),Te=o(()=>e("span",{class:"nav__text"},"Settings",-1)),Be=L({__name:"TopicalIndexView",props:{book:{}},setup(p){const r=p,A=N(),c=a(!0),T=a(!1),F=a(null);let D=a(0),B=a(""),f=a("#FFFFFF"),C=a("#000000"),u=a({}),d=a("");const O=R(()=>d.value in u.value?u.value[d.value]:[]);j(async()=>{const l=await z(),v=await K(r.book);D.value=l[r.book].numOfSongs,B.value=l[r.book].name.short,f.value=l[r.book].primaryColor,C.value=l[r.book].secondaryColor;const s=await q(l[r.book].name.short);if(s==null||v==null){T.value=!0;return}for(let[_,S]of Object.entries(s)){u.value[_]=[];for(let m of S)u.value[_].push({number:m,title:v[m].title,notes:v[m].notes});u.value[_].sort((m,E)=>m.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"").localeCompare(E.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"")))}});function V(l){c.value?(c.value=!1,d.value=l,setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},10)):x()}function x(){c.value=!0,d.value="",setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},10)}function M(){c.value?A.back():x()}return(l,v)=>(n(),i(b,null,[e("div",se,[e("div",oe,[e("img",{onClick:v[0]||(v[0]=s=>M()),class:"ionicon title--left",src:ee}),ae])]),T.value?(n(),i("div",ne,ie)):(n(),i("div",ce,[e("div",null,[e("div",{ref_key:"scroll_topic_list",ref:F},[c.value?I("",!0):(n(),i("div",{key:t(d),class:"topic",style:w({background:t(f)}),onClick:x},[e("h3",_e,g(t(d)),1)],4))],512),(n(!0),i(b,null,$(O.value,s=>G((n(),J(t(k),{key:s.title+s.number,to:`/display/${t(B)}/${s.number}`,class:"song topic-song",style:w(`background: linear-gradient(135deg, ${t(f)}, ${t(C)})`)},{default:h(()=>[e("div",null,[e("div",re,g(s.title),1)]),e("div",ue,[e("div",de,"#"+g(s.number),1)])]),_:2},1032,["to","style"])),[[H,!c.value]])),128))]),e("div",ve,[(n(!0),i(b,null,$(t(u),(s,_)=>(n(),i(b,{key:_},[c.value?(n(),i("div",{key:0,class:"topic expanded-topic",style:w({background:t(f)}),onClick:S=>V(_)},[e("h3",me,g(_),1)],12,pe)):I("",!0)],64))),128))])])),e("nav",he,[y(t(k),{to:"/",class:"nav__link nav__link--active"},{default:h(()=>[ke,fe]),_:1}),y(t(k),{to:"/search",class:"nav__link"},{default:h(()=>[ge,be]),_:1}),y(t(k),{to:"/bookmarks",class:"nav__link"},{default:h(()=>[ye,xe]),_:1}),y(t(k),{to:"/settings",class:"nav__link"},{default:h(()=>[we,Te]),_:1})])],64))}});const $e=Z(Be,[["__scopeId","data-v-95922d86"]]);export{$e as default};
