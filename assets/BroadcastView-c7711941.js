import{d as G,r as l,c as K,a7 as T,$ as U,k as n,m as o,l as a,t as r,q as p,z as d,F as w,s as D,x as c,A as F,G as q,H,L as P}from"./index-7e930115.js";import{v as $,r as j,g as J}from"./broadcast-a690d6fd.js";const Q=_=>(q("data-v-cf07df26"),_=_(),H(),_),W={class:"info-seperator"},X={key:0,class:"song-info"},Y={class:"bottom-text"},Z={class:"digital-clock"},ee={key:1,class:"song-info"},te={class:"song-number"},se={key:0,class:"verses-label"},le={key:1,class:"digital-clock"},oe={key:2,class:"clock"},ae=Q(()=>a("div",{class:"dot"},null,-1)),ne=G({__name:"BroadcastView",setup(_){let h=l(!1),y=l(""),v=l(""),i=l(""),k=l(""),f=l(""),g=l(!1),m=l(!1),b=l(""),O=l(""),L=l([]),S=l("");function B(){const e=new Date,t=e.getHours(),s=e.getMinutes(),u=e.getSeconds();return{hours:t,minutes:s,seconds:u}}function E(){let e=B(),t=e.hours*30+e.minutes*(360/720),s=e.minutes*6+e.seconds*(360/3600),u=e.seconds*6;C.value="rotate("+t+"deg)",I.value="rotate("+s+"deg)",R.value="rotate("+u+"deg)",S.value=M()}function M(){let e=B(),t=e.hours,s=e.minutes,u=t>=12?"PM":"AM";return t=t%12,t=t||12,t+":"+(s<10?"0"+s:s)+" "+u}let x;function A(e){var t=35;if(e>=t)return"8em"}async function V(){let e=(await J(x,y.value)).Item;if(m.value=e.BOOK_ID.S=="BIBLE",m.value)b.value=e.SONG_NUMBER.S,O.value=e.BOOK_COLOR.S;else{if(v.value=e.SONG_NUMBER.S,g.value=!1,e.VERSES.NS[0]==-1)i.value="";else if(e.VERSES.NS[0]==-2)i.value="All Verses";else{e.VERSES.NS.sort((s,u)=>s-u),L.value=e.VERSES.NS,i.value=e.VERSES.NS.join(", "),g.value=!0;let t=N.value;t&&(t.style.fontSize=A(i.value.length)||"10em")}k.value=e.BOOK_COLOR.S,f.value=e.BOOK_ID.S}document.body.style.backgroundColor=e.BG_COLOR.S}let z="";const N=l();K(async()=>{z=document.body.style.backgroundColor,E(),setInterval(E,100),setInterval(V,2e3);let e=await T.get({key:"broadcasting_auth_token"}),t=await $(e.value||"");if(h.value=t.status==200,y.value=t.data.church_id,console.log("Authorized: "+h.value),!h.value){f.value="Unauthorized";return}x=j(),V()}),U(()=>{document.body.style.backgroundColor=z});let C=l(""),I=l(""),R=l("");return(e,t)=>(c(),n("div",W,[o(m)?(c(),n("div",X,[a("h2",{ref:"top_text_element",class:"top-text"},r(o(b)),513),a("h2",Y,r(o(O)),1),a("h2",Z,r(o(S)),1)])):(c(),n("div",ee,[a("h1",te,r(o(v)),1),o(g)?(c(),n("h3",se,"Verses:")):p("",!0),a("h2",{class:"verses",ref_key:"verses_text",ref:N},r(o(i)),513),a("h2",{class:"book-name",style:d({color:o(k)})},r(o(f)),5),o(v).length>0?(c(),n("h2",le,r(o(S)),1)):p("",!0)])),o(v).length==0&&!o(m)?(c(),n("div",oe,[ae,a("div",null,[a("div",{class:"hour-hand",style:d({transform:o(C)})},null,4),a("div",{class:"minute-hand",style:d({transform:o(I)})},null,4),a("div",{class:"second-hand",style:d({transform:o(R)})},null,4)]),a("div",null,[(c(),n(w,null,D(12,s=>a("span",{class:F("h"+s)},r(s),3)),64))]),(c(),n(w,null,D(61,s=>a("div",{class:"diallines",key:s,style:d({transform:"rotate("+6*(s-2)+"deg)"})},null,4)),64))])):p("",!0)]))}});const ie=P(ne,[["__scopeId","data-v-cf07df26"]]);export{ie as default};
