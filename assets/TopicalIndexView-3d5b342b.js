import{_ as I}from"./chevron-back-outline-c47e6776.js";import{_ as z}from"./wifi_off-142c3693.js";import{d as L,u as N,r as n,H as K,o as H,c as q,g as J,e as Q,I as U,i as W,n as X,j as Y,f as Z,a as ee,k as c,l as s,m as l,t as p,F as h,s as T,v as te,x as i,A,p as B,w as P,z as F,R as D,_ as se,B as le,C as oe,D as ae,E as ne,G as ie}from"./index-da7e3611.js";const re={class:"menu"},ue={class:"title"},ce={class:"title--center"},_e=["src"],de={key:0,class:"fallback-container"},ve={key:1,class:"main-content"},pe={key:0},ge=["onClick"],fe={class:"song-title"},me={class:"song__title"},be={class:"booktext--right"},he={class:"song__number"},ke={key:1,class:"song-list"},xe={class:"song__title"},ye={class:"booktext--right"},we={class:"song__number"},$e=L({__name:"TopicalIndexView",props:{book:{}},setup(E){const g=E,V=N(),O=n(!1);let k=n(""),x=n("#FFFFFF"),y=n("#000000"),_=n({}),C=n(""),d=null,f=null;const G=K(()=>v.value?w.value:C.value in _.value?_.value[C.value]:[]);H((u,o)=>{le(o.fullPath),u.fullPath.includes("/display")||(oe(o.fullPath),ae(o.fullPath))}),q(async()=>{f=await J(),d=await Q(g.book),k.value=f[g.book].name.short,x.value=f[g.book].primaryColor,y.value=f[g.book].secondaryColor;const u=await U(f[g.book].name.short);if(u==null||d==null){O.value=!0;return}for(let[t,e]of Object.entries(u)){_.value[t]=[];for(let a of e)_.value[t].push({number:a,title:d[a].title,notes:d[a].notes});_.value[t].sort((a,j)=>a.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"").localeCompare(j.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"")))}$.value=Object.keys(_.value);for(const t of Object.keys(d)){let e=d[t];w.value.push({title:(e==null?void 0:e.title)??"",number:t,notes:e==null?void 0:e.notes,first_line:e==null?void 0:e.first_line})}w.value.sort((t,e)=>t.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"").localeCompare(e.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,""))),v.value?(m.value="Alphabetical Index",b.value="/assets/list-bulleted.svg"):(m.value="Topical Index",b.value="/assets/text.svg");let o=W(S.fullPath);o!=null&&o.forEach(t=>{r.value.push($.value[t])}),await X(),Y(S.fullPath)});let v=Z("isAlphabetical",!1);const w=n([]);let m=n("Topical Index"),b=n("/assets/text.svg");function M(){v.value=!v.value,v.value?(m.value="Alphabetical Index",b.value="/assets/list-bulleted.svg"):(m.value="Topical Index",b.value="/assets/text.svg"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},10)}let $=n([]),r=n([]);const S=ee();function R(u){r.value.includes(u)?r.value.splice(r.value.indexOf(u),1):r.value.push(u);let o=[];r.value.forEach(t=>{var e=$.value.indexOf(t);o.push(e)}),ne(S.fullPath,o)}return(u,o)=>(i(),c(h,null,[s("div",re,[s("div",ue,[s("img",{onClick:o[0]||(o[0]=t=>l(V).back()),class:"ionicon title--left",src:I}),s("h1",ce,p(l(m)),1),s("img",{onClick:o[1]||(o[1]=t=>M()),class:"ionicon title--right",src:l(b)},null,8,_e)])]),O.value?(i(),c("div",de,o[2]||(o[2]=[s("img",{class:"wifi-fallback",src:z},null,-1)]))):(i(),c("div",ve,[l(v)?(i(),c("div",ke,[(i(!0),c(h,null,T(G.value,t=>(i(),B(l(D),{key:t.title+t.number,to:`/display/${l(k)}/${t.number}`,class:"song",style:F(`background: linear-gradient(135deg, ${l(x)}, ${l(y)})`)},{default:P(()=>[s("div",null,[s("div",xe,p(t.title),1)]),s("div",ye,[s("div",we,"#"+p(t.number),1)])]),_:2},1032,["to","style"]))),128))])):(i(),c("div",pe,[(i(!0),c(h,null,T(l(_),(t,e)=>(i(),c("div",{key:e,class:"song-group-container",ref_for:!0,ref:"song_group_elements"},[s("div",{class:"song-group-title-container",onClick:a=>R(e.toString())},[s("div",fe,p(e),1),s("img",{class:A(["ionicon nav__icon dropdown-icon",{"dropdown-icon-active":l(r).includes(e.toString())}]),src:I},null,2)],8,ge),s("div",{class:A(["wrapper",{"wrapper-active":l(r).includes(e.toString())}])},[s("div",{class:A(["song-button-container",{"song-button-container-active":l(r).includes(e.toString())}])},[(i(!0),c(h,null,T(l(_)[e],a=>(i(),B(l(D),{key:a.title+a.number,to:`/display/${l(k)}/${a.number}`,class:"song topic-song",style:F(`background: linear-gradient(135deg, ${l(x)}, ${l(y)})`)},{default:P(()=>[s("div",null,[s("div",me,p(a.title),1)]),s("div",be,[s("div",he,"#"+p(a.number),1)])]),_:2},1032,["to","style"]))),128))],2)],2)]))),128))]))])),te(se,{current_page:"home"})],64))}});const Oe=ie($e,[["__scopeId","data-v-2e3442d2"]]);export{Oe as default};
